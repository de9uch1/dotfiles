#!/usr/bin/env python3

import os
from argparse import ArgumentParser, Namespace


def gen_template() -> str:
    return """#!/usr/bin/env python3

import os
from argparse import ArgumentParser, Namespace


def parse_args() -> Namespace:
    parser = ArgumentParser()
    # fmt: off
    parser.add_argument("file", help="file name")
    # fmt: on
    return parser.parse_args()


def main(args: Namespace) -> None:
    assert os.path.exists(args.file)


def cli_main():
    args = parse_args()
    main(args)


if __name__ == "__main__":
    cli_main()
"""


def parse_args() -> Namespace:
    parser = ArgumentParser()
    parser.add_argument("path", nargs="?", default="./cli.py", help="script path")
    return parser.parse_args()


def main(args: Namespace) -> None:
    assert os.path.exists(os.path.dirname(os.path.abspath(args.path)))

    with open(args.path, mode="w") as f:
        f.write(gen_template())

    os.chmod(args.path, 0o777)


def cli_main():
    args = parse_args()
    main(args)


if __name__ == "__main__":
    cli_main()
